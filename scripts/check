#!/bin/bash
script_base=$(dirname "$0")
source $script_base/tools
cd $script_base/..

echo "Running code formatting..."
black bracket_iq

echo "Running basic flake8 checks..."
flake8 bracket_iq --count --select=E9,F63,F7,F82 --show-source --statistics

echo "Running pylint checks..."
if ! command -v pylint &> /dev/null; then
    echo "Installing pylint..."
    pip install pylint
fi
pylint --rcfile=setup.cfg bracket_iq || echo "Pylint found issues but continuing..."

echo "Running type checking with mypy..."
if ! command -v mypy &> /dev/null; then
    echo "Installing mypy and django-stubs..."
    pip install mypy django-stubs
fi
mypy bracket_iq || echo "MyPy found issues but continuing..."

echo "All checks completed."
exit 0 